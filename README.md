# StubMockWorkshop

## Description
This is the homework resolution for the Automation with Mocking and Stubbing using Javascript Libraries workshop by the Testing Community LATAM. The changes were made using the Vitest framework. 

It focuses on the code generated by 3 prompts supplied by the teacher:
### Prompt 1
Write a JavaScript function that simulates a workflow for managing tasks in a project management system. The function should do the following:
 
    Query a tasks table in a database to fetch all incomplete tasks.
    Use the Trello API to create new Trello cards for each incomplete task.
    Update the database records with the Trello card ID after successfully creating it.
    Return a summary of tasks processed and Trello card links.
 
Make the function modular with separate helper functions for DB queries and Trello API interactions. Ensure the code is structured to support mocking.

### Prompt 2
Write a JavaScript function called syncTrelloWithLocalDB that synchronizes Trello board lists/cards with a local database. The function should:
 
    Fetch all 'Task' lists from a Trello board using its API.
    Cross-check the list of tasks retrieved from Trello with the local database's tasks table.
        Add any new tasks from Trello to the database.
        Update any existing tasks in the local database with changes detected from the Trello board.
    Provide logging for each sync operation, including tasks added, updated, or skipped.
    Return a result object with sync details.
 
Write the code in a way that external calls to the Trello API and the database can be mocked. 

### Prompt 3
Write a JavaScript function that automates weekly report generation using data from a database and Trello API. The function should:
 
    Fetch completed_tasks from a database filtered by the current week.
    For each completed task, retrieve the corresponding card details from Trello using its API (e.g., card title, description, and member assignments).
    Compile the information into a report format (e.g., JSON) with sections for 'Team Stats', 'Task Summaries', and 'Blocked Items'.
    Store the report in a reports table in the database and send it to another external API endpoint (simulate a report delivery endpoint).
    Return a success or failure status.
 
Ensure the function is modular and structured to support mocking Trello API requests. 


The following three test files were created for each scenario in the **js_workshop-main\vitest\src\tests** folder:
- taskManagingWorkflow.test.ts
- syncTrelloWithLocalDB.test.ts
- weeklyReportGenerator.test.ts

Also, the data model and the data file were updated to group all the necessary information.
- **js_workshop-main\vitest\src\test_data**: trelloData.ts
- **js_workshop-main\vitest\src\models**: trelloModel.ts

## Installation

Make sure you run `npm install` from either **js_workshop-main\vitest** or **js_workshop-main\jest**, depending on which testing framework you will use. 

## Usage
In order to run the tests, there are two scripts, one for Jest and another one for Vitest.
### Vitest
- Run `npm run test:vitest` from **js_workshop-main\jest**
### Jest
- Run `npm run test:jest` from **js_workshop-main\vitest**

## Author
Alejandra Alc√°ntara Contreras
